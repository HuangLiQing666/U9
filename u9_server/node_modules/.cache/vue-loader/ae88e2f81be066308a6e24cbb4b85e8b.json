{"remainingRequest":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\src\\components\\xz\\Selcart.vue?vue&type=style&index=0&id=db6a1120&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\src\\components\\xz\\Selcart.vue","mtime":1564998138953},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cart-item{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #ccc;\n}\n.leftImgTxt{\n    display: flex;\n    align-items: center;\n}\n.leftImgTxt>img{\n    width:50px;\n    height:50px;\n}\n.price{\n    margin-left:25px;\n    color:red;\n    font-weight: bold;\n}\n.count{\n    margin-left: 25px;\n}\n",{"version":3,"sources":["Selcart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Selcart.vue","sourceRoot":"src\\components\\xz","sourcesContent":["<template>\r\n    <div class=\"cart\">\r\n        <div class=\"selectAll\">\r\n            全选 <input type=\"checkbox\" @click=\"chekAll\" v-model=\"All\">\r\n        </div>\r\n        <div class=\"cart-item\" v-for=\"(item,i) of cartList\" :key=\"i\">\r\n            <div class=\"leftImgTxt\">\r\n                <input type=\"checkbox\" v-model=\"List\" :value=\"item.id\">\r\n                <img src=\"http://127.0.0.1:3000/01.jpg\" alt=\"\">\r\n                <div class=\"lname\">{{item.lname}}</div>\r\n                <div class=\"price\">{{item.price}}</div>\r\n                <div class=\"count\">x{{item.count}}</div>\r\n            </div>\r\n            <mt-button @click=\"delItem(item.id)\">删除</mt-button>\r\n        </div>\r\n        <div>\r\n            商品数量: <span>{{$store.getters.getCartCount}}</span>\r\n            <mt-button @click=\"delChk\">删除选中商品</mt-button>\r\n            合计: <span>￥{{price.toFixed(2)}}</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return {\r\n            cartList:[],\r\n            List:[],\r\n            All:false,\r\n            price:0,\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore();\r\n    },\r\n    methods:{\r\n        delChk(){\r\n            if(this.List.length==0){\r\n                this.$messagebox(\"请选择要删除的商品\")\r\n                return;\r\n                }\r\n            var obj={list:this.List};\r\n            console.log(this.List)\r\n            this.dele(obj);\r\n        },\r\n        delItem(id){\r\n            var list=[];\r\n            list.push(id);\r\n            var obj={list};\r\n            this.dele(obj);\r\n        },\r\n        chekAll(){\r\n            this.All=!(this.All)\r\n            this.List=[];\r\n            if(this.All==true){\r\n                 this.cartList.forEach((value,index)=>{\r\n                     this.List.push(value.id);\r\n                    //  console.log(this.List)\r\n                 });\r\n             }\r\n        },\r\n        loadMore(){\r\n            this.axios.get(\"/selcart\").then(res=>{\r\n                var code=res.data.code;\r\n                var msg=res.data.msg;\r\n                if(code==-1){\r\n                    this.$messagebox(\"消息\",msg).then(res=>{\r\n                        this.$router.push(\"/Login\")\r\n                        console.log(res);//confirm\r\n                        return;       \r\n                    });\r\n                }\r\n                var cartList=res.data.data;\r\n                if(cartList.length==0){this.All=false;}\r\n                var price=0;\r\n                // \r\n                this.$store.commit(\"clear\");\r\n                for(var i in cartList){\r\n                    price+=cartList[i].count*cartList[i].price;\r\n                    this.$store.commit(\"increment\");\r\n                }\r\n                this.cartList=cartList;\r\n                // console.log(this.cartList)\r\n                this.price=price;\r\n            }).catch(err=>{});\r\n        },\r\n        dele(obj){\r\n            this.$messagebox.confirm(\"确认删除数据?\").then(result=>{\r\n                if(result==\"confirm\"){\r\n                    this.axios.get(\"/delitem\",{params:obj})\r\n                    .then(res=>{\r\n                        var msg=res.data.msg;\r\n                        this.$toast(msg);\r\n                        this.loadMore();\r\n                    });\r\n                }\r\n            }).catch(err=>{});\r\n        }\r\n    },\r\n     watch:{\r\n        List:{\r\n            handler(){\r\n                // console.log(this.List)\r\n                if(this.List.length==this.cartList.length&&this.List.length!==0){\r\n                    this.All=true;\r\n                }else{\r\n                    this.All=false;\r\n                }\r\n            },\r\n        }\r\n    },\r\n}\r\n</script>\r\n<style scoped>\r\n    .cart-item{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        border-bottom: 1px solid #ccc;\r\n    }\r\n    .leftImgTxt{\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n    .leftImgTxt>img{\r\n        width:50px;\r\n        height:50px;\r\n    }\r\n    .price{\r\n        margin-left:25px;\r\n        color:red;\r\n        font-weight: bold;\r\n    }\r\n    .count{\r\n        margin-left: 25px;\r\n    }\r\n</style>\r\n\r\n"]}]}