{"remainingRequest":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\src\\components\\xz\\Selcart.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\src\\components\\xz\\Selcart.vue","mtime":1564998138953},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\web\\Desktop\\VUE-UI\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      cartList: [],\n      List: [],\n      All: false,\n      price: 0\n    };\n  },\n  created: function created() {\n    this.loadMore();\n  },\n  methods: {\n    delChk: function delChk() {\n      if (this.List.length == 0) {\n        this.$messagebox(\"请选择要删除的商品\");\n        return;\n      }\n\n      var obj = {\n        list: this.List\n      };\n      console.log(this.List);\n      this.dele(obj);\n    },\n    delItem: function delItem(id) {\n      var list = [];\n      list.push(id);\n      var obj = {\n        list: list\n      };\n      this.dele(obj);\n    },\n    chekAll: function chekAll() {\n      var _this = this;\n\n      this.All = !this.All;\n      this.List = [];\n\n      if (this.All == true) {\n        this.cartList.forEach(function (value, index) {\n          _this.List.push(value.id); //  console.log(this.List)\n\n        });\n      }\n    },\n    loadMore: function loadMore() {\n      var _this2 = this;\n\n      this.axios.get(\"/selcart\").then(function (res) {\n        var code = res.data.code;\n        var msg = res.data.msg;\n\n        if (code == -1) {\n          _this2.$messagebox(\"消息\", msg).then(function (res) {\n            _this2.$router.push(\"/Login\");\n\n            console.log(res); //confirm\n\n            return;\n          });\n        }\n\n        var cartList = res.data.data;\n\n        if (cartList.length == 0) {\n          _this2.All = false;\n        }\n\n        var price = 0; // \n\n        _this2.$store.commit(\"clear\");\n\n        for (var i in cartList) {\n          price += cartList[i].count * cartList[i].price;\n\n          _this2.$store.commit(\"increment\");\n        }\n\n        _this2.cartList = cartList; // console.log(this.cartList)\n\n        _this2.price = price;\n      }).catch(function (err) {});\n    },\n    dele: function dele(obj) {\n      var _this3 = this;\n\n      this.$messagebox.confirm(\"确认删除数据?\").then(function (result) {\n        if (result == \"confirm\") {\n          _this3.axios.get(\"/delitem\", {\n            params: obj\n          }).then(function (res) {\n            var msg = res.data.msg;\n\n            _this3.$toast(msg);\n\n            _this3.loadMore();\n          });\n        }\n      }).catch(function (err) {});\n    }\n  },\n  watch: {\n    List: {\n      handler: function handler() {\n        // console.log(this.List)\n        if (this.List.length == this.cartList.length && this.List.length !== 0) {\n          this.All = true;\n        } else {\n          this.All = false;\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["Selcart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,gBAAA,EADA;AAEA,YAAA,EAFA;AAGA,WAAA,KAHA;AAIA,aAAA;AAJA,KAAA;AAMA,GARA;AASA,SATA,qBASA;AACA,SAAA,QAAA;AACA,GAXA;AAYA,WAAA;AACA,UADA,oBACA;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,WAAA,CAAA,WAAA;AACA;AACA;;AACA,UAAA,MAAA;AAAA,cAAA,KAAA;AAAA,OAAA;AACA,cAAA,GAAA,CAAA,KAAA,IAAA;AACA,WAAA,IAAA,CAAA,GAAA;AACA,KATA;AAUA,WAVA,mBAUA,EAVA,EAUA;AACA,UAAA,OAAA,EAAA;AACA,WAAA,IAAA,CAAA,EAAA;AACA,UAAA,MAAA;AAAA;AAAA,OAAA;AACA,WAAA,IAAA,CAAA,GAAA;AACA,KAfA;AAgBA,WAhBA,qBAgBA;AAAA;;AACA,WAAA,GAAA,GAAA,CAAA,KAAA,GAAA;AACA,WAAA,IAAA,GAAA,EAAA;;AACA,UAAA,KAAA,GAAA,IAAA,IAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,UAAA,KAAA,EAAA,KAAA,EAAA;AACA,gBAAA,IAAA,CAAA,IAAA,CAAA,MAAA,EAAA,EADA,CAEA;;AACA,SAHA;AAIA;AACA,KAzBA;AA0BA,YA1BA,sBA0BA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,UAAA,EAAA,IAAA,CAAA,eAAA;AACA,YAAA,OAAA,IAAA,IAAA,CAAA,IAAA;AACA,YAAA,MAAA,IAAA,IAAA,CAAA,GAAA;;AACA,YAAA,QAAA,CAAA,CAAA,EAAA;AACA,iBAAA,WAAA,CAAA,IAAA,EAAA,GAAA,EAAA,IAAA,CAAA,eAAA;AACA,mBAAA,OAAA,CAAA,IAAA,CAAA,QAAA;;AACA,oBAAA,GAAA,CAAA,GAAA,EAFA,CAEA;;AACA;AACA,WAJA;AAKA;;AACA,YAAA,WAAA,IAAA,IAAA,CAAA,IAAA;;AACA,YAAA,SAAA,MAAA,IAAA,CAAA,EAAA;AAAA,iBAAA,GAAA,GAAA,KAAA;AAAA;;AACA,YAAA,QAAA,CAAA,CAZA,CAaA;;AACA,eAAA,MAAA,CAAA,MAAA,CAAA,OAAA;;AACA,aAAA,IAAA,CAAA,IAAA,QAAA,EAAA;AACA,mBAAA,SAAA,CAAA,EAAA,KAAA,GAAA,SAAA,CAAA,EAAA,KAAA;;AACA,iBAAA,MAAA,CAAA,MAAA,CAAA,WAAA;AACA;;AACA,eAAA,QAAA,GAAA,QAAA,CAnBA,CAoBA;;AACA,eAAA,KAAA,GAAA,KAAA;AACA,OAtBA,EAsBA,KAtBA,CAsBA,eAAA,CAAA,CAtBA;AAuBA,KAlDA;AAmDA,QAnDA,gBAmDA,GAnDA,EAmDA;AAAA;;AACA,WAAA,WAAA,CAAA,OAAA,CAAA,SAAA,EAAA,IAAA,CAAA,kBAAA;AACA,YAAA,UAAA,SAAA,EAAA;AACA,iBAAA,KAAA,CAAA,GAAA,CAAA,UAAA,EAAA;AAAA,oBAAA;AAAA,WAAA,EACA,IADA,CACA,eAAA;AACA,gBAAA,MAAA,IAAA,IAAA,CAAA,GAAA;;AACA,mBAAA,MAAA,CAAA,GAAA;;AACA,mBAAA,QAAA;AACA,WALA;AAMA;AACA,OATA,EASA,KATA,CASA,eAAA,CAAA,CATA;AAUA;AA9DA,GAZA;AA4EA,SAAA;AACA,UAAA;AACA,aADA,qBACA;AACA;AACA,YAAA,KAAA,IAAA,CAAA,MAAA,IAAA,KAAA,QAAA,CAAA,MAAA,IAAA,KAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,GAAA,GAAA,IAAA;AACA,SAFA,MAEA;AACA,eAAA,GAAA,GAAA,KAAA;AACA;AACA;AARA;AADA;AA5EA,CAAA","sourcesContent":["<template>\r\n    <div class=\"cart\">\r\n        <div class=\"selectAll\">\r\n            全选 <input type=\"checkbox\" @click=\"chekAll\" v-model=\"All\">\r\n        </div>\r\n        <div class=\"cart-item\" v-for=\"(item,i) of cartList\" :key=\"i\">\r\n            <div class=\"leftImgTxt\">\r\n                <input type=\"checkbox\" v-model=\"List\" :value=\"item.id\">\r\n                <img src=\"http://127.0.0.1:3000/01.jpg\" alt=\"\">\r\n                <div class=\"lname\">{{item.lname}}</div>\r\n                <div class=\"price\">{{item.price}}</div>\r\n                <div class=\"count\">x{{item.count}}</div>\r\n            </div>\r\n            <mt-button @click=\"delItem(item.id)\">删除</mt-button>\r\n        </div>\r\n        <div>\r\n            商品数量: <span>{{$store.getters.getCartCount}}</span>\r\n            <mt-button @click=\"delChk\">删除选中商品</mt-button>\r\n            合计: <span>￥{{price.toFixed(2)}}</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return {\r\n            cartList:[],\r\n            List:[],\r\n            All:false,\r\n            price:0,\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore();\r\n    },\r\n    methods:{\r\n        delChk(){\r\n            if(this.List.length==0){\r\n                this.$messagebox(\"请选择要删除的商品\")\r\n                return;\r\n                }\r\n            var obj={list:this.List};\r\n            console.log(this.List)\r\n            this.dele(obj);\r\n        },\r\n        delItem(id){\r\n            var list=[];\r\n            list.push(id);\r\n            var obj={list};\r\n            this.dele(obj);\r\n        },\r\n        chekAll(){\r\n            this.All=!(this.All)\r\n            this.List=[];\r\n            if(this.All==true){\r\n                 this.cartList.forEach((value,index)=>{\r\n                     this.List.push(value.id);\r\n                    //  console.log(this.List)\r\n                 });\r\n             }\r\n        },\r\n        loadMore(){\r\n            this.axios.get(\"/selcart\").then(res=>{\r\n                var code=res.data.code;\r\n                var msg=res.data.msg;\r\n                if(code==-1){\r\n                    this.$messagebox(\"消息\",msg).then(res=>{\r\n                        this.$router.push(\"/Login\")\r\n                        console.log(res);//confirm\r\n                        return;       \r\n                    });\r\n                }\r\n                var cartList=res.data.data;\r\n                if(cartList.length==0){this.All=false;}\r\n                var price=0;\r\n                // \r\n                this.$store.commit(\"clear\");\r\n                for(var i in cartList){\r\n                    price+=cartList[i].count*cartList[i].price;\r\n                    this.$store.commit(\"increment\");\r\n                }\r\n                this.cartList=cartList;\r\n                // console.log(this.cartList)\r\n                this.price=price;\r\n            }).catch(err=>{});\r\n        },\r\n        dele(obj){\r\n            this.$messagebox.confirm(\"确认删除数据?\").then(result=>{\r\n                if(result==\"confirm\"){\r\n                    this.axios.get(\"/delitem\",{params:obj})\r\n                    .then(res=>{\r\n                        var msg=res.data.msg;\r\n                        this.$toast(msg);\r\n                        this.loadMore();\r\n                    });\r\n                }\r\n            }).catch(err=>{});\r\n        }\r\n    },\r\n     watch:{\r\n        List:{\r\n            handler(){\r\n                // console.log(this.List)\r\n                if(this.List.length==this.cartList.length&&this.List.length!==0){\r\n                    this.All=true;\r\n                }else{\r\n                    this.All=false;\r\n                }\r\n            },\r\n        }\r\n    },\r\n}\r\n</script>\r\n<style scoped>\r\n    .cart-item{\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        border-bottom: 1px solid #ccc;\r\n    }\r\n    .leftImgTxt{\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n    .leftImgTxt>img{\r\n        width:50px;\r\n        height:50px;\r\n    }\r\n    .price{\r\n        margin-left:25px;\r\n        color:red;\r\n        font-weight: bold;\r\n    }\r\n    .count{\r\n        margin-left: 25px;\r\n    }\r\n</style>\r\n\r\n"],"sourceRoot":"src\\components\\xz"}]}